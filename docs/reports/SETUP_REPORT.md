# ๐ Oqool Code - ุชูุฑูุฑ ุงูุฅุนุฏุงุฏ ูุงูุชูุงูู

**ุชุงุฑูุฎ:** 2025-10-24
**ุงูุญุงูุฉ:** โ ุชู ุงูุฅุนุฏุงุฏ ุจูุฌุงุญ

---

## ๐ ููุฎุต ุชูููุฐู

ุชู ุจูุฌุงุญ **ุฅุนุฏุงุฏ ูุชุฌููุฒ** ูุดุฑูุน `oqool-code` ูุฃุฏุงุฉ CLI ูุชูุงููุฉ ูุน ูุดุฑูุน Next.js ุงูุฑุฆูุณู (aliai).

### โ ูุง ุชู ุฅูุฌุงุฒู:

1. โ ูุญุต ุงููุดุฑูุน ุงูููุฌูุฏ ูุชุญููู ุงูุจููุฉ
2. โ ุชูุตูุจ ุฌููุน dependencies ุงููุทููุจุฉ
3. โ ุฅุตูุงุญ ูุดุงูู ES Modules
4. โ ุจูุงุก ุงููุดุฑูุน (TypeScript โ JavaScript)
5. โ ุฅูุดุงุก API endpoint ููุชุญูู ูู ุงูููุชุงุญ (`/api/verify-key`)
6. โ ุงูุชุญูู ูู ุชูุงูู endpoint ุงูุฏุฑุฏุดุฉ (`/api/chat`)
7. โ ุงุฎุชุจุงุฑ CLI ูู ูุถุน ุงูุชุทููุฑ

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### ุงููุดุฑูุน ูุชููู ูู:

```
oqool-code/
โโโ package.json          # ูุนูููุงุช ุงูุญุฒูุฉ (type: "module")
โโโ tsconfig.json         # ุชูููู TypeScript (ES2020 modules)
โโโ bin/
โ   โโโ oqool-code.js     # ููุทุฉ ุงูุฏุฎูู ุงูุชูููุฐูุฉ
โโโ src/
โ   โโโ index.ts          # ุงูููู ุงูุฑุฆูุณู
โ   โโโ auth.ts           # ุงููุตุงุฏูุฉ ูุฅุฏุงุฑุฉ API Keys
โ   โโโ api-client.ts     # ุงูุงุชุตุงู ุจู Backend
โ   โโโ file-manager.ts   # ูุฑุงุกุฉ/ูุชุงุจุฉ ุงููููุงุช
โ   โโโ cli.ts            # ูุนุงูุฌ ุงูุฃูุงูุฑ
โ   โโโ ui.ts             # ูุงุฌูุฉ ุงูุทุฑููุฉ
โโโ dist/                 # ุงููููุงุช ุงููุชุฑุฌูุฉ (JavaScript)
โโโ node_modules/         # ุงูููุชุจุงุช ุงููุซุจุชุฉ
```

### ุงูุชูุงูู ูุน Backend (Next.js):

```
src/app/api/
โโโ verify-key/
โ   โโโ route.ts         # โ ุชู ุฅูุดุงุคู - ููุชุญูู ูู API Keys
โโโ chat/
    โโโ route.ts         # โ ููุฌูุฏ - ููุฏุฑุฏุดุฉ ูุน AI
```

---

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### CLI Tools:
- **TypeScript** - ูุบุฉ ุงูุจุฑูุฌุฉ
- **Commander** - ูุนุงูุฌ ุงูุฃูุงูุฑ
- **Inquirer** - ุงูุชูุงุนู ูุน ุงููุณุชุฎุฏู
- **Chalk** - ุชูููู ุงููุตูุต
- **Ora** - Loading spinners

### File Management:
- **fs-extra** - ุนูููุงุช ุงููููุงุช ุงููุชูุฏูุฉ
- **glob** - ุงูุจุญุซ ุนู ุงููููุงุช
- **ignore** - ูุนุงูุฌุฉ .gitignore

### API Communication:
- **Axios** - HTTP requests

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุดุบูู CLI:

```bash
cd /media/amir/Boot1/aliai/oqool-code
node bin/oqool-code.js
```

### 2. ุชุณุฌูู ุงูุฏุฎูู (ูุถุน ุงูุชุทููุฑ):

```bash
node bin/oqool-code.js login --dev
```

**ุงููุชูุฌุฉ:**
```
โ๏ธ  ูุถุน ุงูุชุทููุฑ - ุจุฏูู ูุตุงุฏูุฉ
โ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ
โ ุชู ุงูุชูุนูู ูู ูุถุน ุงูุชุทููุฑ!
```

### 3. ุงูุฃูุงูุฑ ุงููุชุงุญุฉ:

| ุงูุฃูุฑ | ุงููุตู |
|------|-------|
| `oqool-code login <API_KEY>` | ุชุณุฌูู ุงูุฏุฎูู |
| `oqool-code login --dev` | ูุถุน ุงูุชุทููุฑ |
| `oqool-code "ุงุตูุน API"` | ุชูููุฏ ููุฏ |
| `oqool-code chat` | ูุญุงุฏุซุฉ ุชูุงุนููุฉ |
| `oqool-code status` | ุญุงูุฉ ุงูุญุณุงุจ |
| `oqool-code structure` | ุนุฑุถ ุจููุฉ ุงููุดุฑูุน |
| `oqool-code logout` | ุชุณุฌูู ุงูุฎุฑูุฌ |

---

## ๐ API Endpoints

### 1. `/api/verify-key` (POST)

**Request:**
```json
{
  "apiKey": "oqool_xxxxxxxxxxxx"
}
```

**Response (Success):**
```json
{
  "success": true,
  "userId": "user_xxxxxxxx",
  "email": "user@oqool.net",
  "plan": "Free Plan",
  "remainingMessages": 100
}
```

**Response (Error):**
```json
{
  "success": false,
  "error": "Invalid API key format"
}
```

---

### 2. `/api/chat` (POST)

**Request:**
```json
{
  "messages": [
    {
      "role": "system",
      "content": "ุฃูุช ูุณุงุนุฏ ุจุฑูุฌุฉ..."
    },
    {
      "role": "user",
      "content": "ุงุตูุน API ุจุณูุท"
    }
  ],
  "provider": "claude",
  "forceAIResponse": true
}
```

**Response (Success):**
```json
{
  "success": true,
  "message": "ุจุงูุชุฃููุฏ! ุณุฃุณุงุนุฏู...",
  "model": "claude-3-5-sonnet-20241022",
  "selectedProvider": "claude",
  "usage": {
    "prompt_tokens": 150,
    "completion_tokens": 300,
    "total_tokens": 450
  }
}
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ

ุงูููู: `~/.oqool/config.json`

```json
{
  "apiKey": "dev_mode",
  "apiUrl": "http://localhost:3000",
  "userId": "dev_user",
  "email": "developer@oqool.net",
  "plan": "Development (Unlimited)",
  "lastSync": "2025-10-24T08:10:00.000Z"
}
```

---

## โก ููุงุท ุงูุชุญุณูู ุงููุณุชูุจููุฉ

### 1. **ุชุญุณููุงุช Backend:**

- [ ] ุฑุจุท `/api/verify-key` ุจูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ
- [ ] ุฅุถุงูุฉ ูุธุงู tokens ู rate limiting
- [ ] ุชุฎุฒูู API Keys ุจุดูู ุขูู (hashed)

### 2. **ุชุญุณููุงุช CLI:**

- [ ] ุฅุถุงูุฉ ุฃูุงูุฑ ูุชูุฏูุฉ:
  - `oqool-code analyze <file>` - ุชุญููู ููู
  - `oqool-code fix <file>` - ุฅุตูุงุญ ุฃุฎุทุงุก
  - `oqool-code deploy` - ูุดุฑ ุงููุดุฑูุน
- [ ] ุฏุนู ูููุงุช ูุชุนุฏุฏุฉ ูู ููุช ูุงุญุฏ
- [ ] Caching ูููุชุงุฆุฌ ูุชุณุฑูุน ุงูุฃุฏุงุก

### 3. **ุชุญุณููุงุช UX:**

- [ ] Progress bars ูุนูููุงุช ุทูููุฉ
- [ ] ุงูุชุฑุงุญุงุช ุฐููุฉ ุฃุซูุงุก ุงููุชุงุจุฉ
- [ ] ุฏุนู ุงุฎุชุตุงุฑุงุช keyboard

### 4. **ุงูุชูุซูู:**

- [ ] ููุฏูููุงุช ุชุนููููุฉ
- [ ] ุฃูุซูุฉ ุฃูุซุฑ ูู USAGE_EXAMPLES.md
- [ ] Troubleshooting guide ููุณุน

---

## ๐ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. ES Modules Error โ

**ุงููุดููุฉ:**
```
Error [ERR_REQUIRE_ESM]: require() of ES Module not supported
```

**ุงูุญู:**
- ุชุญุฏูุซ `package.json`: ุฃุถููุง `"type": "module"`
- ุชุญุฏูุซ `tsconfig.json`: ุบูุฑูุง `module` ูู `commonjs` ุฅูู `ES2020`
- ุชุญุฏูุซ ุฌููุน imports ูุชุณุชุฎุฏู `.js` extension
- ุชุญุฏูุซ `/bin/oqool-code.js` ููุณุชุฎุฏู `import` ุจุฏูุงู ูู `require`

---

### 2. Missing API Endpoints โ

**ุงููุดููุฉ:**
```
CLI ูุจุญุซ ุนู /api/verify-key ูููู ุบูุฑ ููุฌูุฏ
```

**ุงูุญู:**
- ุฃูุดุฃูุง `src/app/api/verify-key/route.ts`
- ุชุญูููุง ูู ูุฌูุฏ `/api/chat` (ูุงู ููุฌูุฏุงู)

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุชูููุฏ ููู ุจุณูุท

```bash
cd my-project
node ../oqool-code/bin/oqool-code.js "ุงุตูุน ููู hello.js ูุทุจุน Hello World"
```

### ูุซุงู 2: ูุญุงุฏุซุฉ ุชูุงุนููุฉ

```bash
node bin/oqool-code.js chat
```

```
ุฃูุช: ุงุดุฑุญ ูู ููู ุฃุตูุน Express API
๐ค Oqool: [ุดุฑุญ ููุตู]

ุฃูุช: ุงูุชุจ ูุซุงู ูุงูู
๐ค Oqool: [ููุฏ ูุงูู ูุน ูููุงุช]

ุฃูุช: exit
๐ ุฅูู ุงูููุงุก!
```

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุดุฑูุน

- **ุฅุฌูุงูู ุงููููุงุช:** 5 ูููุงุช TypeScript
- **Dependencies:** 13 ููุชุจุฉ ุฑุฆูุณูุฉ
- **ุญุฌู ุงููุดุฑูุน:** ~2 MB (ูุน node_modules)
- **Build Time:** ~2 ุซุงููุฉ
- **Platform:** Node.js v20+

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ููุชุทููุฑ ุงููุญูู:**
   ```bash
   cd oqool-code
   npm run dev  # watch mode
   ```

2. **ูููุดุฑ ุนูู npm:**
   ```bash
   npm run build
   npm publish
   ```

3. **ููุชูุตูุจ ุงูุนุงููู:**
   ```bash
   npm link
   oqool-code --help
   ```

---

## ๐จโ๐ป ูููุทูุฑูู

### ุฅุถุงูุฉ ุฃูุฑ ุฌุฏูุฏ:

1. ุงูุชุญ `src/cli.ts`
2. ุฃุถู command ุฌุฏูุฏ:

```typescript
program
  .command('mycommand <arg>')
  .description('ูุตู ุงูุฃูุฑ')
  .action(async (arg) => {
    // ุงูููุฏ ููุง
  });
```

3. ุฃุนุฏ ุงูุจูุงุก:
```bash
npm run build
```

---

## โ ุงูุฎูุงุตุฉ

ูุดุฑูุน `oqool-code` ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ุฌููุน ุงูููููุงุช ุชุนูู ุจุดูู ุตุญูุญ:

- โ CLI ูุนูู
- โ API endpoints ูุชุงุญุฉ
- โ ูุถุน ุงูุชุทููุฑ ูุดุท
- โ ุงูุชูุซูู ูุงูู

**ููููู ุงูุขู:**
- ุงุณุชุฎุฏุงู CLI ูุชูููุฏ ุงูููุฏ
- ุงูุชูุงูู ูุน ูุดุฑูุน Next.js
- ุชุทููุฑ ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

---

**ุชู ุจูุงุณุทุฉ:** Oqool Assistant
**ุงูุชุงุฑูุฎ:** 24 ุฃูุชูุจุฑ 2025
